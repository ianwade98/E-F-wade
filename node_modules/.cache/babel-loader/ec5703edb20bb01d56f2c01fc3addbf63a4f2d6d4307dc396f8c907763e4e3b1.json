{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Patricio\\\\Documents\\\\ACTUARIAL_SPACE\\\\Coderhouse\\\\ReactJS\\\\EntregaFinal\\\\EntregaFinalReactJS-Wade-master\\\\src\\\\components\\\\CartFinalizarCompra\\\\CartFinalizarCompra.jsx\",\n  _s = $RefreshSig$();\nimport { useContext } from 'react';\nimport { useState } from 'react';\nimport { CartContext } from '../../Context/CartContext';\nimport { addDoc, collection, getFirestore } from 'firebase/firestore';\nimport './CartFinalizarCompra.scss';\nimport InputsCliente from '../InputsCliente/InputsCliente';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst CartFinalizarCompra = () => {\n  _s();\n  const {\n    cart,\n    removeItem,\n    clear\n  } = useContext(CartContext);\n  const [inputName, setInputName] = useState('');\n  const [address, setAddress] = useState('');\n  const [email, setEmail] = useState('');\n  const calcImporteTotal = cart.reduce((total, item) => {\n    return total + item.count * item.price;\n  }, 0);\n  const importeTotal = calcImporteTotal;\n  console.log(importeTotal);\n  const order = {\n    buyer: {\n      name: inputName,\n      phone: address,\n      email: email\n    },\n    items: [{\n      cart\n    }],\n    total: {\n      importeTotal\n    }\n  };\n  const sendOrder = () => {\n    const db = getFirestore();\n    const ordersCollection = collection(db, 'orders');\n    addDoc(ordersCollection, order).then(_ref => {\n      let {\n        id\n      } = _ref;\n      return alert(id);\n    });\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"contenedor-general-cart\",\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"Finaliza tu compra\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 43,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"input-comprador-carrito\",\n      children: /*#__PURE__*/_jsxDEV(InputsCliente, {\n        inputName: inputName,\n        email: email,\n        address: address,\n        setInputName: setInputName,\n        setEmail: setEmail,\n        setAddress: setAddress\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 45,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 44,\n      columnNumber: 7\n    }, this), cart.map(producto => {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"productos-cart\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          children: /*#__PURE__*/_jsxDEV(\"img\", {\n            src: producto.img,\n            height: 80\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 58,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 57,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\"Nombre producto: \", producto.name]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 60,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\"Precio: $\", producto.price]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 61,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\"Cantidad: \", producto.count]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 62,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"boton-vaciar\",\n          onClick: () => removeItem(producto.id),\n          children: \"Eliminar\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 63,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 11\n      }, this);\n    }), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"finalizar-compra\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        children: /*#__PURE__*/_jsxDEV(\"h4\", {\n          children: [\"Importe total: $\", importeTotal, \" \"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 74,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"boton\",\n          onClick: () => sendOrder(),\n          children: \"Realizar Compra\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 77,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"boton-vaciar\",\n          onClick: () => clear(),\n          children: \"Vaciar Carrito\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 80,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 42,\n    columnNumber: 5\n  }, this);\n};\n_s(CartFinalizarCompra, \"BYqAbbKHPMxQQej/hmK1Q2Nqty0=\");\n_c = CartFinalizarCompra;\nexport default CartFinalizarCompra;\nvar _c;\n$RefreshReg$(_c, \"CartFinalizarCompra\");","map":{"version":3,"names":["useContext","useState","CartContext","addDoc","collection","getFirestore","InputsCliente","CartFinalizarCompra","cart","removeItem","clear","inputName","setInputName","address","setAddress","email","setEmail","calcImporteTotal","reduce","total","item","count","price","importeTotal","console","log","order","buyer","name","phone","items","sendOrder","db","ordersCollection","then","id","alert","map","producto","img"],"sources":["C:/Users/Patricio/Documents/ACTUARIAL_SPACE/Coderhouse/ReactJS/EntregaFinal/EntregaFinalReactJS-Wade-master/src/components/CartFinalizarCompra/CartFinalizarCompra.jsx"],"sourcesContent":["import { useContext } from 'react';\nimport { useState } from 'react';\nimport { CartContext } from '../../Context/CartContext';\nimport {\n  addDoc,\n  collection,\n  getFirestore,\n} from 'firebase/firestore';\nimport './CartFinalizarCompra.scss';\nimport InputsCliente from '../InputsCliente/InputsCliente';\n\nconst CartFinalizarCompra = () => {\n  const { cart, removeItem, clear } = useContext(CartContext);\n  const [inputName, setInputName] = useState('');\n  const [address, setAddress] = useState('');\n  const [email, setEmail] = useState('');\n\n  const calcImporteTotal = cart.reduce((total, item) => {\n    return total + item.count*item.price\n  }, 0)\n\n  const importeTotal = calcImporteTotal\n  console.log(importeTotal);\n\n  const order = {\n    buyer: {\n      name:  inputName ,\n      phone: address ,\n      email: email ,\n    },\n    items: [{ cart }],\n    total: {importeTotal},\n  };\n\n  const sendOrder = () => {\n    const db = getFirestore();\n    const ordersCollection = collection(db, 'orders');\n    addDoc(ordersCollection, order).then(({ id }) => alert(id));\n  };\n  \n  return (\n    <div className=\"contenedor-general-cart\">\n      <h1>Finaliza tu compra</h1>\n      <div className=\"input-comprador-carrito\">\n        <InputsCliente\n          inputName={inputName}\n          email={email}\n          address={address}\n          setInputName={setInputName}\n          setEmail={setEmail}\n          setAddress={setAddress}\n        />\n      </div>\n      {cart.map((producto) => {\n        return (\n          <div className=\"productos-cart\">\n            <div>\n              <img src={producto.img} height={80} />\n            </div>\n            <p>Nombre producto: {producto.name}</p>\n            <p>Precio: ${producto.price}</p>\n            <p>Cantidad: {producto.count}</p>\n            <button\n              className=\"boton-vaciar\"\n              onClick={() => removeItem(producto.id)}\n            >\n              Eliminar\n            </button>\n          </div>\n        );\n      })}\n      <div className='finalizar-compra'>\n        <div>\n          <h4>Importe total: ${importeTotal} </h4>\n        </div>\n        <div>\n          <button className=\"boton\" onClick={() => sendOrder()}>\n          Realizar Compra\n          </button>\n          <button className=\"boton-vaciar\" onClick={() => clear()}>\n          Vaciar Carrito\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default CartFinalizarCompra;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}